<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using the simstandard package â€¢ simstandard</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Using the simstandard package">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simstandard</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/simstandard_tutorial.html">Using the simstandard package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/wjschne/simstandard">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="simstandard_tutorial_files/header-attrs-2.1/header-attrs.js"></script><script src="simstandard_tutorial_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Using the simstandard package</h1>
                        <h4 class="author">W. Joel Schneider</h4>
            
            <h4 class="date">2020-02-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/wjschne/simstandard/blob/master/vignettes/simstandard_tutorial.Rmd"><code>vignettes/simstandard_tutorial.Rmd</code></a></small>
      <div class="hidden name"><code>simstandard_tutorial.Rmd</code></div>

    </div>

    
    
<p><img src="logo.png" align="right" height="140/"></p>
<div id="purpose-of-simstandard" class="section level1">
<h1 class="hasAnchor">
<a href="#purpose-of-simstandard" class="anchor"></a>Purpose of simstandard</h1>
<p>In the figure below, you can see a hypothetical structural model with its standardized loadings and path coefficients.</p>
<p><img src="ModelFigure.svg" width="700" height="100%" style="display: block; margin: auto;"></p>
<p>Suppose you need to simulate multivariate normal data based on this model, but you do not know the error variances and the latent disturbance variances needed to make your model produce standardized data. It is often difficult to find such values algebraically, and instead they must be found iteratively.</p>
<p>The simstandard package finds the standardized variances and creates standardized multivariate normal data using <a href="http://lavaan.ugent.be/tutorial/syntax1.html">lavaan syntax</a>. It can also create latent variable scores, error terms, disturbance terms, estimated factor scores, and equally weighted composite scores for each latent variable.</p>
</div>
<div id="generate-model-based-multivariate-data" class="section level1">
<h1 class="hasAnchor">
<a href="#generate-model-based-multivariate-data" class="anchor"></a>Generate Model-Based Multivariate Data</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(simstandard)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lavaan)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(knitr)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(kableExtra)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tibble)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyr)</span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co"># lavaan syntax for model</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>m &lt;-<span class="st"> "</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="st">A =~ 0.7 * A1 + 0.8 * A2 + 0.9 * A3 + 0.3 * B1</span></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="st">B =~ 0.7 * B1 + 0.8 * B2 + 0.9 * B3</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="st">B ~ 0.6 * A</span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="st">"</span></span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co"># Simulate data</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>d &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim_standardized.html">sim_standardized</a></span>(m, <span class="dt">n =</span> <span class="dv">100000</span>)</span>
<span id="cb1-19"><a href="#cb1-19"></a></span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="co"># Display First 6 rows</span></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(d) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="st">  </span><span class="kw">kable_styling</span>()</span></code></pre></div>
<table class="table table">
<thead><tr>
<th style="text-align:right;">
A1
</th>
<th style="text-align:right;">
A2
</th>
<th style="text-align:right;">
A3
</th>
<th style="text-align:right;">
B1
</th>
<th style="text-align:right;">
B2
</th>
<th style="text-align:right;">
B3
</th>
<th style="text-align:right;">
A
</th>
<th style="text-align:right;">
B
</th>
<th style="text-align:right;">
e_A1
</th>
<th style="text-align:right;">
e_A2
</th>
<th style="text-align:right;">
e_A3
</th>
<th style="text-align:right;">
e_B1
</th>
<th style="text-align:right;">
e_B2
</th>
<th style="text-align:right;">
e_B3
</th>
<th style="text-align:right;">
d_B
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1.51
</td>
<td style="text-align:right;">
0.88
</td>
<td style="text-align:right;">
1.03
</td>
<td style="text-align:right;">
2.38
</td>
<td style="text-align:right;">
3.58
</td>
<td style="text-align:right;">
2.87
</td>
<td style="text-align:right;">
1.31
</td>
<td style="text-align:right;">
2.79
</td>
<td style="text-align:right;">
0.60
</td>
<td style="text-align:right;">
-0.17
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
1.35
</td>
<td style="text-align:right;">
0.36
</td>
<td style="text-align:right;">
2.00
</td>
</tr>
<tr>
<td style="text-align:right;">
1.57
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.51
</td>
<td style="text-align:right;">
0.33
</td>
<td style="text-align:right;">
0.51
</td>
<td style="text-align:right;">
1.12
</td>
<td style="text-align:right;">
1.05
</td>
<td style="text-align:right;">
0.68
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
-0.43
</td>
<td style="text-align:right;">
-0.46
</td>
<td style="text-align:right;">
-0.03
</td>
<td style="text-align:right;">
0.51
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.50
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0.36
</td>
<td style="text-align:right;">
-0.31
</td>
<td style="text-align:right;">
0.70
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.17
</td>
<td style="text-align:right;">
-0.52
</td>
<td style="text-align:right;">
0.56
</td>
<td style="text-align:right;">
0.73
</td>
<td style="text-align:right;">
0.23
</td>
<td style="text-align:right;">
-0.45
</td>
<td style="text-align:right;">
0.55
</td>
<td style="text-align:right;">
0.15
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
-0.94
</td>
<td style="text-align:right;">
-0.76
</td>
<td style="text-align:right;">
-0.29
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:right;">
-0.68
</td>
<td style="text-align:right;">
-0.86
</td>
<td style="text-align:right;">
-0.46
</td>
<td style="text-align:right;">
0.33
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
0.29
</td>
<td style="text-align:right;">
0.58
</td>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.02
</td>
<td style="text-align:right;">
-0.81
</td>
<td style="text-align:right;">
0.45
</td>
<td style="text-align:right;">
-0.23
</td>
<td style="text-align:right;">
0.72
</td>
<td style="text-align:right;">
0.20
</td>
<td style="text-align:right;">
1.04
</td>
<td style="text-align:right;">
-0.27
</td>
<td style="text-align:right;">
-0.75
</td>
<td style="text-align:right;">
-1.65
</td>
<td style="text-align:right;">
-0.49
</td>
<td style="text-align:right;">
-0.35
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:right;">
0.44
</td>
<td style="text-align:right;">
-0.89
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.44
</td>
<td style="text-align:right;">
-0.19
</td>
<td style="text-align:right;">
-0.79
</td>
<td style="text-align:right;">
-1.13
</td>
<td style="text-align:right;">
-0.44
</td>
<td style="text-align:right;">
-0.82
</td>
<td style="text-align:right;">
-0.97
</td>
<td style="text-align:right;">
-0.67
</td>
<td style="text-align:right;">
-0.77
</td>
<td style="text-align:right;">
0.58
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
-0.37
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
-0.22
</td>
<td style="text-align:right;">
-0.09
</td>
</tr>
</tbody>
</table>
<p>Letâ€™s make a function to display correlations and covariance matrices:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>ggcor &lt;-<span class="st"> </span><span class="cf">function</span>(d) {</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(ggplot2)</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="kw"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(d) <span class="op">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="st">    </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames_to_column</a></span>(<span class="st">"rowname"</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="st">    </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span>(colname, r, <span class="op">-</span>rowname) <span class="op">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">rowname =</span> forcats<span class="op">::</span><span class="kw"><a href="https://forcats.tidyverse.org/reference/fct_rev.html">fct_rev</a></span>(rowname)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">colname =</span> <span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(colname, <span class="dt">levels =</span> <span class="kw"><a href="https://rdrr.io/r/base/rev.html">rev</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/levels.html">levels</a></span>(rowname)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(colname, rowname, <span class="dt">fill =</span> r)) <span class="op">+</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="st">    </span><span class="kw">geom_tile</span>(<span class="dt">color =</span> <span class="st">"gray90"</span>) <span class="op">+</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="st">    </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(</span>
<span id="cb2-11"><a href="#cb2-11"></a>      <span class="dt">label =</span> <span class="kw"><a href="https://rdrr.io/r/base/formatc.html">formatC</a></span>(</span>
<span id="cb2-12"><a href="#cb2-12"></a>      r, </span>
<span id="cb2-13"><a href="#cb2-13"></a>      <span class="dt">digits =</span> <span class="dv">2</span>, </span>
<span id="cb2-14"><a href="#cb2-14"></a>      <span class="dt">format =</span> <span class="st">"f"</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="st">        </span>stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span>(<span class="st">"0</span><span class="ch">\\</span><span class="st">."</span>,<span class="st">"."</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="st">        </span>stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span>(<span class="st">"1.00"</span>,<span class="st">"1"</span>)), </span>
<span id="cb2-17"><a href="#cb2-17"></a>    <span class="dt">color =</span> <span class="st">"white"</span>, </span>
<span id="cb2-18"><a href="#cb2-18"></a>    <span class="dt">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb2-19"><a href="#cb2-19"></a>    <span class="dt">family =</span> <span class="st">"serif"</span>) <span class="op">+</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="st">    </span><span class="kw">scale_fill_gradient2</span>(<span class="ot">NULL</span>,</span>
<span id="cb2-21"><a href="#cb2-21"></a>      <span class="dt">na.value =</span> <span class="st">"gray20"</span>,</span>
<span id="cb2-22"><a href="#cb2-22"></a>      <span class="dt">limits =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="fl">1.01</span>, <span class="fl">1.01</span>),</span>
<span id="cb2-23"><a href="#cb2-23"></a>      <span class="dt">high =</span> <span class="st">"#924552"</span>,</span>
<span id="cb2-24"><a href="#cb2-24"></a>      <span class="dt">low =</span> <span class="st">"#293999"</span></span>
<span id="cb2-25"><a href="#cb2-25"></a>    ) <span class="op">+</span></span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="st">    </span><span class="kw">coord_equal</span>() <span class="op">+</span></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="st">    </span><span class="kw">scale_x_discrete</span>(<span class="ot">NULL</span>,<span class="dt">position =</span> <span class="st">"top"</span>) <span class="op">+</span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="st">    </span><span class="kw">scale_y_discrete</span>(<span class="ot">NULL</span>) <span class="op">+</span></span>
<span id="cb2-29"><a href="#cb2-29"></a><span class="st">    </span><span class="kw">theme_light</span>(<span class="dt">base_family =</span> <span class="st">"serif"</span>, <span class="dt">base_size =</span> <span class="dv">14</span>) </span>
<span id="cb2-30"><a href="#cb2-30"></a>}</span></code></pre></div>
<p>Because the data are standardized, the covariance matrix of the observed and latent variables should be nearly identical to a correlation matrix. The error and disturbance terms are not standardized.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">cov</a></span>(d) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="st">  </span>ggcor</span></code></pre></div>
<p><img src="simstandard_tutorial_files/figure-html/modelcov-1.svg" width="100%" height="100%"></p>
<p>To return only the observed variables</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>d &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim_standardized.html">sim_standardized</a></span>(m,</span>
<span id="cb4-2"><a href="#cb4-2"></a>                      <span class="dt">n =</span> <span class="dv">100000</span>,</span>
<span id="cb4-3"><a href="#cb4-3"></a>                      <span class="dt">latent =</span> <span class="ot">FALSE</span>,</span>
<span id="cb4-4"><a href="#cb4-4"></a>                      <span class="dt">errors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co"># Display First 6 rows</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(d) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="st">  </span><span class="kw">kable_styling</span>()</span></code></pre></div>
<table class="table table">
<thead><tr>
<th style="text-align:right;">
A1
</th>
<th style="text-align:right;">
A2
</th>
<th style="text-align:right;">
A3
</th>
<th style="text-align:right;">
B1
</th>
<th style="text-align:right;">
B2
</th>
<th style="text-align:right;">
B3
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1.61
</td>
<td style="text-align:right;">
1.15
</td>
<td style="text-align:right;">
2.06
</td>
<td style="text-align:right;">
0.90
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:right;">
-0.08
</td>
</tr>
<tr>
<td style="text-align:right;">
1.46
</td>
<td style="text-align:right;">
1.50
</td>
<td style="text-align:right;">
0.68
</td>
<td style="text-align:right;">
0.12
</td>
<td style="text-align:right;">
-0.48
</td>
<td style="text-align:right;">
0.34
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.89
</td>
<td style="text-align:right;">
-1.19
</td>
<td style="text-align:right;">
-1.22
</td>
<td style="text-align:right;">
-0.52
</td>
<td style="text-align:right;">
0.40
</td>
<td style="text-align:right;">
-0.73
</td>
</tr>
<tr>
<td style="text-align:right;">
0.13
</td>
<td style="text-align:right;">
-1.55
</td>
<td style="text-align:right;">
-0.79
</td>
<td style="text-align:right;">
-1.00
</td>
<td style="text-align:right;">
-0.17
</td>
<td style="text-align:right;">
-1.18
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.93
</td>
<td style="text-align:right;">
-1.64
</td>
<td style="text-align:right;">
-0.96
</td>
<td style="text-align:right;">
-1.23
</td>
<td style="text-align:right;">
-1.51
</td>
<td style="text-align:right;">
-1.01
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.43
</td>
<td style="text-align:right;">
-0.24
</td>
<td style="text-align:right;">
-0.10
</td>
<td style="text-align:right;">
-0.87
</td>
<td style="text-align:right;">
-0.78
</td>
<td style="text-align:right;">
-1.21
</td>
</tr>
</tbody>
</table>
</div>
<div id="comparison-with-lavaansimulatedata" class="section level1">
<h1 class="hasAnchor">
<a href="#comparison-with-lavaansimulatedata" class="anchor"></a>Comparison with <code>lavaan::simulateData</code>
</h1>
<p>I love the lavaan package. However, one aspect of one function in lavaan is not quite right yet. lavaanâ€™s <code>simulateData</code> function <a href="https://github.com/yrosseel/lavaan/issues/46">is known to generate non-standardized data</a>, even when the <code>standardized</code> parameter is set to <code>TRUE</code>. See how it creates variables B1, B2, and B3 with variances much higher than 1. Furthermore, it only produces observed variables.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lavaan)</span>
<span id="cb5-2"><a href="#cb5-2"></a>d_lavaan &lt;-<span class="st"> </span><span class="kw">simulateData</span>(</span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="dt">model =</span> m, </span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="dt">sample.nobs =</span> <span class="dv">100000</span>, </span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="dt">standardized =</span> <span class="ot">TRUE</span>)</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="kw"><a href="https://rdrr.io/r/stats/cor.html">cov</a></span>(d_lavaan) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="st">  </span>ggcor</span></code></pre></div>
<p><img src="simstandard_tutorial_files/figure-html/lavaan-1.svg" width="100%" height="100%"></p>
</div>
<div id="inspecting-model-matrices" class="section level1">
<h1 class="hasAnchor">
<a href="#inspecting-model-matrices" class="anchor"></a>Inspecting model matrices</h1>
<p>You can inspect the matrices that simstandard uses to create the data by calling <code>simstandardized_matrices</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>matrices &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim_standardized_matrices.html">sim_standardized_matrices</a></span>(m)</span></code></pre></div>
<p>The A matrix contains all the asymmetric path coefficients (i.e., the loadings and the structural coefficients). These coefficients are specified in the lavaan model syntax.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>matrices<span class="op">$</span>RAM_matrices<span class="op">$</span>A <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="st">  </span><span class="kw">ggcor</span>()</span></code></pre></div>
<p><img src="simstandard_tutorial_files/figure-html/Amatrix-1.svg" width="100%" height="100%"></p>
<p>The S matrix contains all the symmetric path coefficients (i.e., the variances and correlations of the observed and latent variables). For endogenous variables, the variances and correlations refer to the variance and correlations of the variableâ€™s associated error or disturbance term. In this case, A is the only endogenous variable, and thus its variance on the diagonal of the S matrix is 1.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>matrices<span class="op">$</span>RAM_matrices<span class="op">$</span>S <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="st">  </span><span class="kw">ggcor</span>()</span></code></pre></div>
<p><img src="simstandard_tutorial_files/figure-html/Smatrix-1.svg" width="100%" height="100%"></p>
<p>Thus, we can use these results to insert the missing values from the path diagram at the beginning of this tutorial</p>
<p><img src="ModelFigureComplete.svg" width="700" height="100%" style="display: block; margin: auto;"></p>
</div>
<div id="estimated-factor-scores" class="section level1">
<h1 class="hasAnchor">
<a href="#estimated-factor-scores" class="anchor"></a>Estimated Factor Scores</h1>
<p>If you want to estimate factor scores using the regression method (i.e., Thurstoneâ€™s method), set <code>factor_scores</code> to <code>TRUE</code>. All scores ending in <em>FS</em> are factor score estimates.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>m &lt;-<span class="st"> "</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="st">A =~ 0.9 * A1 + 0.8 * A2 + 0.7 * A3</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="st">"</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="kw"><a href="../reference/sim_standardized.html">sim_standardized</a></span>(</span>
<span id="cb9-5"><a href="#cb9-5"></a>  m, </span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="dt">n =</span> <span class="dv">100000</span>, </span>
<span id="cb9-7"><a href="#cb9-7"></a>  <span class="dt">factor_scores =</span> <span class="ot">TRUE</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="st">  </span><span class="kw">kable_styling</span>()</span></code></pre></div>
<table class="table table">
<thead><tr>
<th style="text-align:right;">
A1
</th>
<th style="text-align:right;">
A2
</th>
<th style="text-align:right;">
A3
</th>
<th style="text-align:right;">
A
</th>
<th style="text-align:right;">
e_A1
</th>
<th style="text-align:right;">
e_A2
</th>
<th style="text-align:right;">
e_A3
</th>
<th style="text-align:right;">
A_FS
</th>
<th style="text-align:right;">
e_A1_FS
</th>
<th style="text-align:right;">
e_A2_FS
</th>
<th style="text-align:right;">
e_A3_FS
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
0.54
</td>
<td style="text-align:right;">
-0.76
</td>
<td style="text-align:right;">
0.54
</td>
<td style="text-align:right;">
-0.81
</td>
<td style="text-align:right;">
1.26
</td>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
1.10
</td>
<td style="text-align:right;">
0.20
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
-1.53
</td>
<td style="text-align:right;">
0.56
</td>
</tr>
<tr>
<td style="text-align:right;">
-3.67
</td>
<td style="text-align:right;">
-3.10
</td>
<td style="text-align:right;">
-2.72
</td>
<td style="text-align:right;">
-3.67
</td>
<td style="text-align:right;">
-0.37
</td>
<td style="text-align:right;">
-0.17
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
-3.50
</td>
<td style="text-align:right;">
-1.19
</td>
<td style="text-align:right;">
-0.50
</td>
<td style="text-align:right;">
-0.38
</td>
</tr>
<tr>
<td style="text-align:right;">
0.13
</td>
<td style="text-align:right;">
-1.01
</td>
<td style="text-align:right;">
-1.10
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.37
</td>
<td style="text-align:right;">
-0.79
</td>
<td style="text-align:right;">
-0.92
</td>
<td style="text-align:right;">
-0.39
</td>
<td style="text-align:right;">
1.11
</td>
<td style="text-align:right;">
-1.16
</td>
<td style="text-align:right;">
-1.16
</td>
</tr>
<tr>
<td style="text-align:right;">
1.87
</td>
<td style="text-align:right;">
1.10
</td>
<td style="text-align:right;">
1.35
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
1.16
</td>
<td style="text-align:right;">
0.46
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
1.65
</td>
<td style="text-align:right;">
0.90
</td>
<td style="text-align:right;">
-0.36
</td>
<td style="text-align:right;">
0.27
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.72
</td>
<td style="text-align:right;">
-0.21
</td>
<td style="text-align:right;">
-0.39
</td>
<td style="text-align:right;">
-0.33
</td>
<td style="text-align:right;">
-0.42
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
-0.16
</td>
<td style="text-align:right;">
-0.55
</td>
<td style="text-align:right;">
-0.52
</td>
<td style="text-align:right;">
0.39
</td>
<td style="text-align:right;">
0.00
</td>
</tr>
<tr>
<td style="text-align:right;">
0.44
</td>
<td style="text-align:right;">
0.97
</td>
<td style="text-align:right;">
0.91
</td>
<td style="text-align:right;">
0.82
</td>
<td style="text-align:right;">
-0.31
</td>
<td style="text-align:right;">
0.31
</td>
<td style="text-align:right;">
0.33
</td>
<td style="text-align:right;">
0.68
</td>
<td style="text-align:right;">
-0.41
</td>
<td style="text-align:right;">
0.71
</td>
<td style="text-align:right;">
0.60
</td>
</tr>
</tbody>
</table>
<div id="adding-factor-scores-to-new-data" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-factor-scores-to-new-data" class="anchor"></a>Adding factor scores to new data</h2>
<p>Suppose you have some new data and wish to add estimated factor scores to it. The <code>add_factor_scores</code> function will take your data and return your data with the estimated factors added to it.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>d &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span>(</span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="op">~</span>A1,  <span class="op">~</span>A2,  <span class="op">~</span>A3,</span>
<span id="cb10-3"><a href="#cb10-3"></a>   2L,  <span class="fl">2.5</span>,  <span class="fl">1.3</span>,</span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="op">-</span>1L, <span class="fl">-1.5</span>, <span class="fl">-2.1</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>  )</span>
<span id="cb10-6"><a href="#cb10-6"></a></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="kw"><a href="../reference/add_factor_scores.html">add_factor_scores</a></span>(d, m ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="st">  </span><span class="kw">kable_styling</span>()</span></code></pre></div>
<table class="table table">
<thead><tr>
<th style="text-align:right;">
A1
</th>
<th style="text-align:right;">
A2
</th>
<th style="text-align:right;">
A3
</th>
<th style="text-align:right;">
A
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.5
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
2.1
</td>
</tr>
<tr>
<td style="text-align:right;">
-1
</td>
<td style="text-align:right;">
-1.5
</td>
<td style="text-align:right;">
-2.1
</td>
<td style="text-align:right;">
-1.4
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="composite-scores" class="section level1">
<h1 class="hasAnchor">
<a href="#composite-scores" class="anchor"></a>Composite Scores</h1>
<p>If you want to calculate equally-weighted composite scores based on the indicators of each latent variable, set `composites = TRUEâ€™.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>m &lt;-<span class="st"> "</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="st">A =~ 0.9 * A1 + 0.8 * A2 + 0.7 * A3</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">"</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="kw"><a href="../reference/sim_standardized.html">sim_standardized</a></span>(</span>
<span id="cb11-5"><a href="#cb11-5"></a>  m, </span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="dt">n =</span> <span class="dv">100000</span>, </span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="dt">composites =</span> <span class="ot">TRUE</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="st">  </span><span class="kw">kable</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="st">  </span><span class="kw">kable_styling</span>()</span></code></pre></div>
<table class="table table">
<thead><tr>
<th style="text-align:right;">
A1
</th>
<th style="text-align:right;">
A2
</th>
<th style="text-align:right;">
A3
</th>
<th style="text-align:right;">
A
</th>
<th style="text-align:right;">
e_A1
</th>
<th style="text-align:right;">
e_A2
</th>
<th style="text-align:right;">
e_A3
</th>
<th style="text-align:right;">
A_Composite
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
-0.30
</td>
<td style="text-align:right;">
-0.94
</td>
<td style="text-align:right;">
-0.55
</td>
<td style="text-align:right;">
0.53
</td>
<td style="text-align:right;">
0.13
</td>
<td style="text-align:right;">
-0.55
</td>
<td style="text-align:right;">
-0.46
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.11
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
1.05
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
-0.12
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
1.04
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:right;">
-2.43
</td>
<td style="text-align:right;">
-1.75
</td>
<td style="text-align:right;">
-1.29
</td>
<td style="text-align:right;">
-2.01
</td>
<td style="text-align:right;">
-0.62
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
0.12
</td>
<td style="text-align:right;">
-2.09
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.88
</td>
<td style="text-align:right;">
-1.26
</td>
<td style="text-align:right;">
-1.76
</td>
<td style="text-align:right;">
-0.70
</td>
<td style="text-align:right;">
-0.25
</td>
<td style="text-align:right;">
-0.70
</td>
<td style="text-align:right;">
-1.28
</td>
<td style="text-align:right;">
-1.49
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:right;">
-0.13
</td>
<td style="text-align:right;">
-0.04
</td>
<td style="text-align:right;">
-0.21
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.10
</td>
<td style="text-align:right;">
-0.12
</td>
</tr>
<tr>
<td style="text-align:right;">
0.93
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:right;">
1.71
</td>
<td style="text-align:right;">
1.41
</td>
<td style="text-align:right;">
-0.34
</td>
<td style="text-align:right;">
-0.18
</td>
<td style="text-align:right;">
0.72
</td>
<td style="text-align:right;">
1.37
</td>
</tr>
</tbody>
</table>
</div>
<div id="return-lavaan-syntax-with-all-parameters-set-free" class="section level1">
<h1 class="hasAnchor">
<a href="#return-lavaan-syntax-with-all-parameters-set-free" class="anchor"></a>Return lavaan syntax with all parameters set free</h1>
<p>Suppose that we want to verify that the data generated by the <code>sim_standardized</code> function is correct. We will need an analogous model, but with all the fixed parameters set free. We could manually remove the fixed parameter values, but with large models the process is tedious and introduces a risk of error. The <code>fixed2free</code> function painlessly removes the fixed parameters values from the model.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># lavaan syntax for model</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>m &lt;-<span class="st"> "</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">A =~ 0.7 * A1 + 0.8 * A2 + 0.9 * A3 + 0.3 * B1</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">B =~ 0.7 * B1 + 0.8 * B2 + 0.9 * B3</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">B ~ 0.6 * A</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="st">"</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co"># Make model m free</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>m_free &lt;-<span class="st"> </span><span class="kw"><a href="../reference/fixed2free.html">fixed2free</a></span>(m)</span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co"># Display model m_free</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="kw"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(m_free)</span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="co">#&gt; A =~ A1 + A2 + A3 + B1</span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="co">#&gt; B =~ B1 + B2 + B3</span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="co">#&gt; B ~ A</span></span></code></pre></div>
<p>Now letâ€™s use lavaan to see if the observed data in <code>d</code> conform to the model in <code>m_free</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># Set the random number generator for reproducible results</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">12</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co"># Generate data based on model m</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>d &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim_standardized.html">sim_standardized</a></span>(</span>
<span id="cb13-5"><a href="#cb13-5"></a>  m,</span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="dt">n =</span> <span class="dv">100000</span>,</span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="dt">latent =</span> <span class="ot">FALSE</span>,</span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="dt">errors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb13-9"><a href="#cb13-9"></a></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="co"># Evaluate the fit of model m_free on data d</span></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lavaan)</span>
<span id="cb13-12"><a href="#cb13-12"></a>lav_results &lt;-<span class="st"> </span><span class="kw">sem</span>(</span>
<span id="cb13-13"><a href="#cb13-13"></a>  <span class="dt">model =</span> m_free, </span>
<span id="cb13-14"><a href="#cb13-14"></a>  <span class="dt">data =</span> d)</span>
<span id="cb13-15"><a href="#cb13-15"></a></span>
<span id="cb13-16"><a href="#cb13-16"></a><span class="co"># Display summary of model</span></span>
<span id="cb13-17"><a href="#cb13-17"></a><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(</span>
<span id="cb13-18"><a href="#cb13-18"></a>  lav_results, </span>
<span id="cb13-19"><a href="#cb13-19"></a>  <span class="dt">standardized =</span> <span class="ot">TRUE</span>, </span>
<span id="cb13-20"><a href="#cb13-20"></a>  <span class="dt">fit.measures =</span> <span class="ot">TRUE</span>)</span>
<span id="cb13-21"><a href="#cb13-21"></a><span class="co">#&gt; lavaan 0.6-5 ended normally after 27 iterations</span></span>
<span id="cb13-22"><a href="#cb13-22"></a><span class="co">#&gt; </span></span>
<span id="cb13-23"><a href="#cb13-23"></a><span class="co">#&gt;   Estimator                                         ML</span></span>
<span id="cb13-24"><a href="#cb13-24"></a><span class="co">#&gt;   Optimization method                           NLMINB</span></span>
<span id="cb13-25"><a href="#cb13-25"></a><span class="co">#&gt;   Number of free parameters                         14</span></span>
<span id="cb13-26"><a href="#cb13-26"></a><span class="co">#&gt;                                                       </span></span>
<span id="cb13-27"><a href="#cb13-27"></a><span class="co">#&gt;   Number of observations                        100000</span></span>
<span id="cb13-28"><a href="#cb13-28"></a><span class="co">#&gt;                                                       </span></span>
<span id="cb13-29"><a href="#cb13-29"></a><span class="co">#&gt; Model Test User Model:</span></span>
<span id="cb13-30"><a href="#cb13-30"></a><span class="co">#&gt;                                                       </span></span>
<span id="cb13-31"><a href="#cb13-31"></a><span class="co">#&gt;   Test statistic                                 7.493</span></span>
<span id="cb13-32"><a href="#cb13-32"></a><span class="co">#&gt;   Degrees of freedom                                 7</span></span>
<span id="cb13-33"><a href="#cb13-33"></a><span class="co">#&gt;   P-value (Chi-square)                           0.379</span></span>
<span id="cb13-34"><a href="#cb13-34"></a><span class="co">#&gt; </span></span>
<span id="cb13-35"><a href="#cb13-35"></a><span class="co">#&gt; Model Test Baseline Model:</span></span>
<span id="cb13-36"><a href="#cb13-36"></a><span class="co">#&gt; </span></span>
<span id="cb13-37"><a href="#cb13-37"></a><span class="co">#&gt;   Test statistic                            371352.125</span></span>
<span id="cb13-38"><a href="#cb13-38"></a><span class="co">#&gt;   Degrees of freedom                                15</span></span>
<span id="cb13-39"><a href="#cb13-39"></a><span class="co">#&gt;   P-value                                        0.000</span></span>
<span id="cb13-40"><a href="#cb13-40"></a><span class="co">#&gt; </span></span>
<span id="cb13-41"><a href="#cb13-41"></a><span class="co">#&gt; User Model versus Baseline Model:</span></span>
<span id="cb13-42"><a href="#cb13-42"></a><span class="co">#&gt; </span></span>
<span id="cb13-43"><a href="#cb13-43"></a><span class="co">#&gt;   Comparative Fit Index (CFI)                    1.000</span></span>
<span id="cb13-44"><a href="#cb13-44"></a><span class="co">#&gt;   Tucker-Lewis Index (TLI)                       1.000</span></span>
<span id="cb13-45"><a href="#cb13-45"></a><span class="co">#&gt; </span></span>
<span id="cb13-46"><a href="#cb13-46"></a><span class="co">#&gt; Loglikelihood and Information Criteria:</span></span>
<span id="cb13-47"><a href="#cb13-47"></a><span class="co">#&gt; </span></span>
<span id="cb13-48"><a href="#cb13-48"></a><span class="co">#&gt;   Loglikelihood user model (H0)            -666610.982</span></span>
<span id="cb13-49"><a href="#cb13-49"></a><span class="co">#&gt;   Loglikelihood unrestricted model (H1)    -666607.236</span></span>
<span id="cb13-50"><a href="#cb13-50"></a><span class="co">#&gt;                                                       </span></span>
<span id="cb13-51"><a href="#cb13-51"></a><span class="co">#&gt;   Akaike (AIC)                             1333249.965</span></span>
<span id="cb13-52"><a href="#cb13-52"></a><span class="co">#&gt;   Bayesian (BIC)                           1333383.146</span></span>
<span id="cb13-53"><a href="#cb13-53"></a><span class="co">#&gt;   Sample-size adjusted Bayesian (BIC)      1333338.653</span></span>
<span id="cb13-54"><a href="#cb13-54"></a><span class="co">#&gt; </span></span>
<span id="cb13-55"><a href="#cb13-55"></a><span class="co">#&gt; Root Mean Square Error of Approximation:</span></span>
<span id="cb13-56"><a href="#cb13-56"></a><span class="co">#&gt; </span></span>
<span id="cb13-57"><a href="#cb13-57"></a><span class="co">#&gt;   RMSEA                                          0.001</span></span>
<span id="cb13-58"><a href="#cb13-58"></a><span class="co">#&gt;   90 Percent confidence interval - lower         0.000</span></span>
<span id="cb13-59"><a href="#cb13-59"></a><span class="co">#&gt;   90 Percent confidence interval - upper         0.004</span></span>
<span id="cb13-60"><a href="#cb13-60"></a><span class="co">#&gt;   P-value RMSEA &lt;= 0.05                          1.000</span></span>
<span id="cb13-61"><a href="#cb13-61"></a><span class="co">#&gt; </span></span>
<span id="cb13-62"><a href="#cb13-62"></a><span class="co">#&gt; Standardized Root Mean Square Residual:</span></span>
<span id="cb13-63"><a href="#cb13-63"></a><span class="co">#&gt; </span></span>
<span id="cb13-64"><a href="#cb13-64"></a><span class="co">#&gt;   SRMR                                           0.001</span></span>
<span id="cb13-65"><a href="#cb13-65"></a><span class="co">#&gt; </span></span>
<span id="cb13-66"><a href="#cb13-66"></a><span class="co">#&gt; Parameter Estimates:</span></span>
<span id="cb13-67"><a href="#cb13-67"></a><span class="co">#&gt; </span></span>
<span id="cb13-68"><a href="#cb13-68"></a><span class="co">#&gt;   Information                                 Expected</span></span>
<span id="cb13-69"><a href="#cb13-69"></a><span class="co">#&gt;   Information saturated (h1) model          Structured</span></span>
<span id="cb13-70"><a href="#cb13-70"></a><span class="co">#&gt;   Standard errors                             Standard</span></span>
<span id="cb13-71"><a href="#cb13-71"></a><span class="co">#&gt; </span></span>
<span id="cb13-72"><a href="#cb13-72"></a><span class="co">#&gt; Latent Variables:</span></span>
<span id="cb13-73"><a href="#cb13-73"></a><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all</span></span>
<span id="cb13-74"><a href="#cb13-74"></a><span class="co">#&gt;   A =~                                                                  </span></span>
<span id="cb13-75"><a href="#cb13-75"></a><span class="co">#&gt;     A1                1.000                               0.703    0.703</span></span>
<span id="cb13-76"><a href="#cb13-76"></a><span class="co">#&gt;     A2                1.142    0.005  231.116    0.000    0.803    0.800</span></span>
<span id="cb13-77"><a href="#cb13-77"></a><span class="co">#&gt;     A3                1.284    0.005  247.676    0.000    0.903    0.901</span></span>
<span id="cb13-78"><a href="#cb13-78"></a><span class="co">#&gt;     B1                0.427    0.004  114.547    0.000    0.300    0.300</span></span>
<span id="cb13-79"><a href="#cb13-79"></a><span class="co">#&gt;   B =~                                                                  </span></span>
<span id="cb13-80"><a href="#cb13-80"></a><span class="co">#&gt;     B1                1.000                               0.701    0.700</span></span>
<span id="cb13-81"><a href="#cb13-81"></a><span class="co">#&gt;     B2                1.139    0.005  238.139    0.000    0.798    0.798</span></span>
<span id="cb13-82"><a href="#cb13-82"></a><span class="co">#&gt;     B3                1.288    0.005  247.366    0.000    0.902    0.901</span></span>
<span id="cb13-83"><a href="#cb13-83"></a><span class="co">#&gt; </span></span>
<span id="cb13-84"><a href="#cb13-84"></a><span class="co">#&gt; Regressions:</span></span>
<span id="cb13-85"><a href="#cb13-85"></a><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all</span></span>
<span id="cb13-86"><a href="#cb13-86"></a><span class="co">#&gt;   B ~                                                                   </span></span>
<span id="cb13-87"><a href="#cb13-87"></a><span class="co">#&gt;     A                 0.597    0.004  141.196    0.000    0.599    0.599</span></span>
<span id="cb13-88"><a href="#cb13-88"></a><span class="co">#&gt; </span></span>
<span id="cb13-89"><a href="#cb13-89"></a><span class="co">#&gt; Variances:</span></span>
<span id="cb13-90"><a href="#cb13-90"></a><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all</span></span>
<span id="cb13-91"><a href="#cb13-91"></a><span class="co">#&gt;    .A1                0.507    0.003  194.579    0.000    0.507    0.506</span></span>
<span id="cb13-92"><a href="#cb13-92"></a><span class="co">#&gt;    .A2                0.362    0.002  165.904    0.000    0.362    0.359</span></span>
<span id="cb13-93"><a href="#cb13-93"></a><span class="co">#&gt;    .A3                0.188    0.002   97.276    0.000    0.188    0.188</span></span>
<span id="cb13-94"><a href="#cb13-94"></a><span class="co">#&gt;    .B1                0.170    0.001  130.982    0.000    0.170    0.169</span></span>
<span id="cb13-95"><a href="#cb13-95"></a><span class="co">#&gt;    .B2                0.362    0.002  178.775    0.000    0.362    0.362</span></span>
<span id="cb13-96"><a href="#cb13-96"></a><span class="co">#&gt;    .B3                0.189    0.002  106.863    0.000    0.189    0.189</span></span>
<span id="cb13-97"><a href="#cb13-97"></a><span class="co">#&gt;     A                 0.495    0.004  121.519    0.000    1.000    1.000</span></span>
<span id="cb13-98"><a href="#cb13-98"></a><span class="co">#&gt;    .B                 0.315    0.003  124.248    0.000    0.641    0.641</span></span>
<span id="cb13-99"><a href="#cb13-99"></a></span>
<span id="cb13-100"><a href="#cb13-100"></a><span class="co"># Extract RAM paths</span></span>
<span id="cb13-101"><a href="#cb13-101"></a>RAM &lt;-<span class="st"> </span><span class="kw"><a href="../reference/lav2ram.html">lav2ram</a></span>(lav_results)</span>
<span id="cb13-102"><a href="#cb13-102"></a></span>
<span id="cb13-103"><a href="#cb13-103"></a><span class="co"># Display asymmetric paths (i.e., single-headed arrows for </span></span>
<span id="cb13-104"><a href="#cb13-104"></a><span class="co"># loadings and structure coefficients)</span></span>
<span id="cb13-105"><a href="#cb13-105"></a>RAM<span class="op">$</span>A <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggcor</span>()</span></code></pre></div>
<p><img src="simstandard_tutorial_files/figure-html/lavaantest-1.svg" width="100%" height="100%"></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="co"># Display symmetric paths (i.e., curved double-headed arrows</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co"># exogenous variances, error variances, disturbance variances, </span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># and any covariances among these)</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>RAM<span class="op">$</span>S <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggcor</span>()</span></code></pre></div>
<p><img src="simstandard_tutorial_files/figure-html/lavaantest-2.svg" width="100%" height="100%"></p>
<p>As can be seen, all the fit measures indicate a near-perfect fit, and the parameter estimates are within rounding error of the fixed parameters in model <code>m</code>.</p>
</div>
<div id="return-lavaan-syntax-for-a-model-with-standardized-variances-specified" class="section level1">
<h1 class="hasAnchor">
<a href="#return-lavaan-syntax-for-a-model-with-standardized-variances-specified" class="anchor"></a>Return lavaan syntax for a model with standardized variances specified</h1>
<p>Although the <code>simstandardized</code> function will generate data for you, you might want to use a function from a different package instead, such as <code><a href="https://rdrr.io/pkg/lavaan/man/simulateData.html">lavaan::simulateData</a></code> or <code><a href="https://rdrr.io/pkg/simsem/man/sim.html">simsem::sim</a></code>. In this case, you can use the <code>model_complete</code> function to output the lavaan syntax for a standardized model with all standardized variances specified.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># Specify model</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>m &lt;-<span class="st"> "</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="st">A =~ 0.7 * A1 + 0.8 * A2 + 0.9 * A3 + 0.3 * B1</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="st">B =~ 0.7 * B1 + 0.8 * B2 + 0.9 * B3</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="st">B ~ 0.6 * A</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="st">"</span></span>
<span id="cb15-7"><a href="#cb15-7"></a>m_complete &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_complete.html">model_complete</a></span>(m)</span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co"># Display complete model</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="kw"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(m_complete)</span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">#&gt; </span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">#&gt; A =~ 0.7 * A1 + 0.8 * A2 + 0.9 * A3 + 0.3 * B1</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">#&gt; B =~ 0.7 * B1 + 0.8 * B2 + 0.9 * B3</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">#&gt; B ~ 0.6 * A</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">#&gt; </span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">#&gt; # Variances</span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">#&gt; A1 ~~ 0.51 * A1</span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co">#&gt; A2 ~~ 0.36 * A2</span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">#&gt; A3 ~~ 0.19 * A3</span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">#&gt; B1 ~~ 0.168 * B1</span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">#&gt; B2 ~~ 0.36 * B2</span></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co">#&gt; B3 ~~ 0.19 * B3</span></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="co">#&gt; A ~~ 1 * A</span></span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="co">#&gt; B ~~ 0.64 * B</span></span></code></pre></div>
</div>
<div id="return-lavaan-syntax-from-matrices" class="section level1">
<h1 class="hasAnchor">
<a href="#return-lavaan-syntax-from-matrices" class="anchor"></a>Return lavaan syntax from matrices</h1>
<p>Suppose that a research article provides model coefficients in a table. We could spend time creating lavaan syntax by hand, but such work can be tedious. The <code>matrix2lavaan</code> function can help save time when the models are already specified in matrix form.</p>
<div id="the-measurement-model" class="section level2">
<h2 class="hasAnchor">
<a href="#the-measurement-model" class="anchor"></a>The measurement model</h2>
<p>The measurement model can be specified with a matrix in which the column names are latent variables and the row names are indicator variables.</p>
<p>Here we have three latent variables, Vocabulary, Working Memory Capacity, and Reading, each defined by three indicator variables.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>m_meas &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</span>
<span id="cb16-2"><a href="#cb16-2"></a>    <span class="fl">0.8</span>,<span class="dv">0</span>,<span class="dv">0</span>,  <span class="co"># VC1</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>    <span class="fl">0.9</span>,<span class="dv">0</span>,<span class="dv">0</span>,  <span class="co"># VC2</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>    <span class="fl">0.7</span>,<span class="dv">0</span>,<span class="dv">0</span>,  <span class="co"># VC3</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>    <span class="dv">0</span>,<span class="fl">0.6</span>,<span class="dv">0</span>,  <span class="co"># WM1</span></span>
<span id="cb16-6"><a href="#cb16-6"></a>    <span class="dv">0</span>,<span class="fl">0.7</span>,<span class="dv">0</span>,  <span class="co"># WM2</span></span>
<span id="cb16-7"><a href="#cb16-7"></a>    <span class="dv">0</span>,<span class="fl">0.8</span>,<span class="dv">0</span>,  <span class="co"># WM3</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>    <span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.9</span>,  <span class="co"># RD1</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>    <span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.7</span>,  <span class="co"># RD2</span></span>
<span id="cb16-10"><a href="#cb16-10"></a>    <span class="dv">0</span>,<span class="dv">0</span>,<span class="fl">0.8</span>), <span class="co"># RD3</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>    <span class="dt">nrow =</span> <span class="dv">9</span>, </span>
<span id="cb16-12"><a href="#cb16-12"></a>    <span class="dt">byrow =</span> <span class="ot">TRUE</span>,</span>
<span id="cb16-13"><a href="#cb16-13"></a>    <span class="dt">dimnames =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb16-14"><a href="#cb16-14"></a>      <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"VC1"</span>, <span class="st">"VC2"</span>, <span class="st">"VC3"</span>, </span>
<span id="cb16-15"><a href="#cb16-15"></a>        <span class="st">"WM1"</span>, <span class="st">"WM2"</span>, <span class="st">"WM3"</span>, </span>
<span id="cb16-16"><a href="#cb16-16"></a>        <span class="st">"RD1"</span>, <span class="st">"RD2"</span>, <span class="st">"RD3"</span>),</span>
<span id="cb16-17"><a href="#cb16-17"></a>      <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Vocabulary"</span>, <span class="st">"WorkingMemory"</span>, <span class="st">"Reading"</span>)))</span></code></pre></div>
</div>
<div id="the-structural-model" class="section level2">
<h2 class="hasAnchor">
<a href="#the-structural-model" class="anchor"></a>The structural model</h2>
<p>The structural model can be specified with a matrix in which the predictors are the column names and the criterion variables are the row names.</p>
<p>Here we have Vocabulary and Working Memory Capacity predicting Reading Scores.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>m_struct &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(</span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.4</span>,<span class="fl">0.3</span>), </span>
<span id="cb17-3"><a href="#cb17-3"></a>    <span class="dt">ncol =</span> <span class="dv">2</span>,</span>
<span id="cb17-4"><a href="#cb17-4"></a>    <span class="dt">dimnames =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb17-5"><a href="#cb17-5"></a>      <span class="st">"Reading"</span>,</span>
<span id="cb17-6"><a href="#cb17-6"></a>      <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Vocabulary"</span>, <span class="st">"WorkingMemory"</span>))) </span></code></pre></div>
<p>This could have been a 3 by 3 matrix with zeroes (which are ignored).</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>m_struct &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</span>
<span id="cb18-2"><a href="#cb18-2"></a>    <span class="dv">0</span>,   <span class="dv">0</span>,   <span class="dv">0</span>,  <span class="co"># Vocabulary</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>    <span class="dv">0</span>,   <span class="dv">0</span>,   <span class="dv">0</span>,  <span class="co"># WorkingMemory</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="fl">0.4</span>, <span class="fl">0.3</span>, <span class="dv">0</span>), <span class="co"># Reading</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>    <span class="dt">nrow =</span> <span class="dv">3</span>, </span>
<span id="cb18-6"><a href="#cb18-6"></a>    <span class="dt">byrow =</span> <span class="ot">TRUE</span>) </span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="kw"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(m_struct) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Vocabulary"</span>, <span class="st">"WorkingMemory"</span>, <span class="st">"Reading"</span>)</span>
<span id="cb18-8"><a href="#cb18-8"></a><span class="kw"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(m_struct) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Vocabulary"</span>, <span class="st">"WorkingMemory"</span>, <span class="st">"Reading"</span>)</span></code></pre></div>
</div>
<div id="covariances" class="section level2">
<h2 class="hasAnchor">
<a href="#covariances" class="anchor"></a>Covariances</h2>
<p>The variances and covariances must be specified as a symmetric matrix, though variables can be omitted.</p>
<p>Here we specify that the latent variables Vocabulary and Working Memory Capacity are correlated.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>m_cov &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</span>
<span id="cb19-2"><a href="#cb19-2"></a>    <span class="dv">1</span>,   <span class="fl">0.5</span>, </span>
<span id="cb19-3"><a href="#cb19-3"></a>    <span class="fl">0.5</span>, <span class="dv">1</span>), </span>
<span id="cb19-4"><a href="#cb19-4"></a>    <span class="dt">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb19-5"><a href="#cb19-5"></a>    <span class="dt">dimnames =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</span>
<span id="cb19-6"><a href="#cb19-6"></a>      <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Vocabulary"</span>, <span class="st">"WorkingMemory"</span>),</span>
<span id="cb19-7"><a href="#cb19-7"></a>      <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Vocabulary"</span>, <span class="st">"WorkingMemory"</span>))) </span></code></pre></div>
</div>
<div id="using-the-matrix2lavaan-function" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-matrix2lavaan-function" class="anchor"></a>Using the <code>matrix2lavaan</code> function</h2>
<p>The <code>matrix2lavaan</code> function takes arguments for the measurement model, structural model, and covariances. Any of the three matrices can be omitted.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>model &lt;-<span class="st"> </span><span class="kw"><a href="../reference/matrix2lavaan.html">matrix2lavaan</a></span>(<span class="dt">measurement_model =</span> m_meas, </span>
<span id="cb20-2"><a href="#cb20-2"></a>                       <span class="dt">structural_model =</span> m_struct, </span>
<span id="cb20-3"><a href="#cb20-3"></a>                       <span class="dt">covariances =</span> m_cov)</span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="kw"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(model)</span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="co">#&gt; Vocabulary =~ 0.8 * VC1 + 0.9 * VC2 + 0.7 * VC3</span></span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="co">#&gt; WorkingMemory =~ 0.6 * WM1 + 0.7 * WM2 + 0.8 * WM3</span></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="co">#&gt; Reading =~ 0.9 * RD1 + 0.7 * RD2 + 0.8 * RD3</span></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="co">#&gt; Reading ~ 0.4 * Vocabulary + 0.3 * WorkingMemory</span></span>
<span id="cb20-9"><a href="#cb20-9"></a><span class="co">#&gt; Vocabulary ~~ 0.5 * WorkingMemory</span></span></code></pre></div>
</div>
<div id="specifying-models-with-data-frames-instead-of-matrices" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-models-with-data-frames-instead-of-matrices" class="anchor"></a>Specifying models with data.frames instead of matrices</h2>
<p>As an alternative, the <code>matrix2lavaan</code> function can take data.frames (or tibbles) with either rownames or the first column as a character vector.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># A tibble with indicator variables listed in the first column</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>m_meas &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span>(</span>
<span id="cb21-3"><a href="#cb21-3"></a>     <span class="op">~</span>Test, <span class="op">~</span>Vocabulary, <span class="op">~</span>WorkingMemory, <span class="op">~</span>Reading,</span>
<span id="cb21-4"><a href="#cb21-4"></a>     <span class="st">"VC1"</span>,         <span class="fl">0.8</span>,              <span class="dv">0</span>,        <span class="dv">0</span>,</span>
<span id="cb21-5"><a href="#cb21-5"></a>     <span class="st">"VC2"</span>,         <span class="fl">0.9</span>,              <span class="dv">0</span>,        <span class="dv">0</span>,</span>
<span id="cb21-6"><a href="#cb21-6"></a>     <span class="st">"VC3"</span>,         <span class="fl">0.7</span>,              <span class="dv">0</span>,        <span class="dv">0</span>,</span>
<span id="cb21-7"><a href="#cb21-7"></a>     <span class="st">"WM1"</span>,           <span class="dv">0</span>,            <span class="fl">0.6</span>,        <span class="dv">0</span>,</span>
<span id="cb21-8"><a href="#cb21-8"></a>     <span class="st">"WM2"</span>,           <span class="dv">0</span>,            <span class="fl">0.7</span>,        <span class="dv">0</span>,</span>
<span id="cb21-9"><a href="#cb21-9"></a>     <span class="st">"WM3"</span>,           <span class="dv">0</span>,            <span class="fl">0.8</span>,        <span class="dv">0</span>,</span>
<span id="cb21-10"><a href="#cb21-10"></a>     <span class="st">"RD1"</span>,           <span class="dv">0</span>,              <span class="dv">0</span>,      <span class="fl">0.9</span>,</span>
<span id="cb21-11"><a href="#cb21-11"></a>     <span class="st">"RD2"</span>,           <span class="dv">0</span>,              <span class="dv">0</span>,      <span class="fl">0.7</span>,</span>
<span id="cb21-12"><a href="#cb21-12"></a>     <span class="st">"RD3"</span>,           <span class="dv">0</span>,              <span class="dv">0</span>,      <span class="fl">0.8</span>)</span>
<span id="cb21-13"><a href="#cb21-13"></a></span>
<span id="cb21-14"><a href="#cb21-14"></a><span class="co"># A data.frame with criterion variable specified as a row name</span></span>
<span id="cb21-15"><a href="#cb21-15"></a>m_struct &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">Vocabulary =</span> <span class="fl">0.4</span>, </span>
<span id="cb21-16"><a href="#cb21-16"></a>                       <span class="dt">WorkingMemory =</span> <span class="fl">0.3</span>, </span>
<span id="cb21-17"><a href="#cb21-17"></a>                       <span class="dt">row.names =</span> <span class="st">"Reading"</span>)</span>
<span id="cb21-18"><a href="#cb21-18"></a></span>
<span id="cb21-19"><a href="#cb21-19"></a><span class="co"># A data.frame with variable names specified as row names</span></span>
<span id="cb21-20"><a href="#cb21-20"></a>m_cov &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">Vocabulary =</span>    <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="fl">0.5</span>),</span>
<span id="cb21-21"><a href="#cb21-21"></a>                    <span class="dt">WorkingMemory =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.5</span>, <span class="dv">1</span>))</span>
<span id="cb21-22"><a href="#cb21-22"></a><span class="kw"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span>(m_cov) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Vocabulary"</span>, <span class="st">"WorkingMemory"</span>)</span>
<span id="cb21-23"><a href="#cb21-23"></a></span>
<span id="cb21-24"><a href="#cb21-24"></a></span>
<span id="cb21-25"><a href="#cb21-25"></a>model &lt;-<span class="st"> </span><span class="kw"><a href="../reference/matrix2lavaan.html">matrix2lavaan</a></span>(<span class="dt">measurement_model =</span> m_meas, </span>
<span id="cb21-26"><a href="#cb21-26"></a>                       <span class="dt">structural_model =</span> m_struct, </span>
<span id="cb21-27"><a href="#cb21-27"></a>                       <span class="dt">covariances =</span> m_cov)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#purpose-of-simstandard">Purpose of simstandard</a></li>
      <li><a href="#generate-model-based-multivariate-data">Generate Model-Based Multivariate Data</a></li>
      <li><a href="#comparison-with-lavaansimulatedata">Comparison with <code>lavaan::simulateData</code></a></li>
      <li><a href="#inspecting-model-matrices">Inspecting model matrices</a></li>
      <li>
<a href="#estimated-factor-scores">Estimated Factor Scores</a>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#adding-factor-scores-to-new-data">Adding factor scores to new data</a></li>
      </ul>
</li>
      <li><a href="#composite-scores">Composite Scores</a></li>
      <li><a href="#return-lavaan-syntax-with-all-parameters-set-free">Return lavaan syntax with all parameters set free</a></li>
      <li><a href="#return-lavaan-syntax-for-a-model-with-standardized-variances-specified">Return lavaan syntax for a model with standardized variances specified</a></li>
      <li>
<a href="#return-lavaan-syntax-from-matrices">Return lavaan syntax from matrices</a>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-measurement-model">The measurement model</a></li>
      <li><a href="#the-structural-model">The structural model</a></li>
      <li><a href="#covariances">Covariances</a></li>
      <li><a href="#using-the-matrix2lavaan-function">Using the <code>matrix2lavaan</code> function</a></li>
      <li><a href="#specifying-models-with-data-frames-instead-of-matrices">Specifying models with data.frames instead of matrices</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by W. Joel Schneider.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
